# ML-Сервис с Подсистемой Биллинга

## Описание проекта
ML-сервис предоставляет предсказания на основе загруженных моделей.
Взаимодействие с сервисом осуществляется через API, а доступ к ML-расчетам предоставляется на платной основе через систему биллинга.
Пользователь оплачивает вычисления с помощью кредитов, которые списываются за каждое предсказание.

Оценка рисков инвестиций

Один из возможных сценариев использования — прогнозирование доходности и вероятности потерь по инвестиционным инструментам.
Система анализирует исторические данные о ценах активов, экономические показатели.
Используя ML-модели, сервис может предсказывать вероятность снижения стоимости активов, оценивать потенциальную доходность и предлагать стратегии хеджирования рисков.
Такая аналитика полезна как для индивидуальных инвесторов, так и для финансовых организаций, занимающихся управлением активами.

## Ключевые бизнес-сущности
### Пользователь (User)
- Может быть клиентом банка или корпоративным пользователем (финансовая организация).
- Имеет учетную запись, личный кабинет и баланс кредитов.
- Может запрашивать предсказания и оплачивать их кредитами.
- Может пополнять счет через банковские транзакции.

### ML-Модель (ML Model)
- Загружается в систему администратором.
- Выполняет предсказания по входным данным.
- Имеет стоимость использования (сколько кредитов списывается за 1 предсказание).
- Может быть обновлена или удалена.

### Запрос на предсказание (Inference Request)
- Запрос от пользователя на выполнение предсказания.
- Содержит входные данные, выбранную ML-модель и статус обработки.
- По завершении вычисления сохраняет результат и списывает кредиты.

### Биллинг
- Учет количества кредитов у пользователя.
- Списание кредитов за использование ML-моделей.

### Логирование и аналитика 
- Хранит историю выполненных предсказаний.
- Позволяет пользователям просматривать статистику расходов и использованных моделей.
- Предоставляет администратору данные по загрузке системы и популярности моделей.

## Проектирование архитектуры
### Архитектурные компоненты
#### Frontend (UI)
- Личный кабинет пользователя (просмотр баланса, выполнение предсказаний).
- Панель администратора (управление моделями, мониторинг работы сервиса).

#### Backend (FastAPI)
- Обрабатывает запросы пользователей.
- Управляет взаимодействием с базой данных.
- Контролирует биллинг и списание кредитов.
- Обрабатывает запросы на предсказания и распределяет их между ML-моделями.

#### ML-сервис
- Отдельный сервис, выполняющий предсказания с использованием загруженных моделей.
- Поддерживает работу с несколькими моделями.
- Может использовать контейнеризацию для масштабируемости.

#### База данных (Sqlite)
- Хранит информацию о пользователях, балансе кредитов, истории транзакций и выполненных предсказаниях.

#### Биллинг-сервис
- Управляет счетами пользователей и транзакциями.
- Интегрируется с платежной системой для пополнения баланса.
- Обеспечивает безопасность транзакций.

#### Мониторинг и логирование
- Логирует все действия пользователей и администраторов.
- Сохраняет данные о загрузке серверов и выполненных предсказаниях.
- Позволяет отслеживать популярность ML-моделей.

## Логика работы сервиса
### Регистрация и вход
1. Пользователь регистрируется, создавая аккаунт.
2. После входа получает доступ к личному кабинету.

### Пополнение счета
1. Пользователь отправляет запрос на пополнение баланса.
2. Биллинг-сервис обрабатывает платеж через банковскую систему.
3. После успешного платежа кредиты зачисляются на баланс пользователя.

### Выполнение предсказания
1. Пользователь выбирает ML-модель и отправляет входные данные.
2. Система проверяет, хватает ли у него кредитов.
3. Если хватает – отправляет запрос в ML-сервис.
4. После выполнения списывает кредиты и сохраняет результат.

### Просмотр истории
1. Пользователь может просматривать историю выполненных предсказаний и платежей.
2. Администратор может анализировать загрузку сервиса.

